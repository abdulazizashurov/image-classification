{"ast":null,"code":"import _objectSpread from\"/Users/abdulazizashurov/Desktop/whatimage/src/whatimage-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/abdulazizashurov/Desktop/whatimage/src/whatimage-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abdulazizashurov/Desktop/whatimage/src/whatimage-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abdulazizashurov/Desktop/whatimage/src/whatimage-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abdulazizashurov/Desktop/whatimage/src/whatimage-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Dropzone from'react-dropzone';import'./Classifier.css';import{Spinner,Button,Alert,Image}from'react-bootstrap';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Classifier=/*#__PURE__*/function(_Component){_inherits(Classifier,_Component);var _super=_createSuper(Classifier);function Classifier(){var _this;_classCallCheck(this,Classifier);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={files:[],isLoading:false,errorMessage:'',resentImage:null};_this.onDrop=function(files){_this.setState({files:[],isLoading:true,resentImage:null});_this.loadImage(files);};_this.loadImage=function(files){setTimeout(function(){_this.setState({files:files,isLoading:false},function(){console.log(_this.state.files);var formData=new FormData();formData.append('picture',_this.state.files[0],_this.state.files[0].name);axios.post('http://localhost:8000/api/images/',formData,{headers:{'accept':'application/json','content-type':'multipart/form-data'}}).catch(function(err){_this.setState({errorMessage:err.message});});});},1000);};_this.activateSpinner=function(){_this.setState({files:[],isLoading:true});};_this.deactivateSpinner=function(){_this.setState({isLoading:false});};_this.sendImage=function(){_this.activateSpinner();var formData=new FormData();formData.append('picture',_this.state.files[0],_this.state.files[0].name);axios.post('http://localhost:8000/api/images/',formData,{headers:{'accept':'application/json','content-type':'multipart/form-data'}}).then(function(resp){_this.getImageClass(resp);}).catch(function(err){_this.setState({errorMessage:err.message});});};_this.getImageClass=function(obj){axios.get(\"http://localhost:8000/api/images/\".concat(obj.data.id,\"/\"),{headers:{'accept':'application/json'}}).then(function(resp){_this.setState({resentImage:resp});}).catch(function(err){_this.setState({errorMessage:err.message});});_this.deactivateSpinner();};return _this;}_createClass(Classifier,[{key:\"render\",value:function render(){var _this2=this;var files=this.state.files.map(function(file){return/*#__PURE__*/_jsxs(\"li\",{children:[file.name,\" - \",file.size,\" bytes\"]},file.name);});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Dropzone,{onDrop:this.onDrop,accept:\"image/png, image/jpeg\",children:function children(_ref){var isDragActive=_ref.isDragActive,getRootProps=_ref.getRootProps,getInputProps=_ref.getInputProps;return/*#__PURE__*/_jsxs(\"section\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps({className:'dropzone back'})),{},{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsx(\"i\",{className:\"far fa-image mb-2 text-muted\",style:{fontSize:100}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:isDragActive?\"Rasim yuklanmoqda\":\"Bironta rasim yuklang\"})]})),/*#__PURE__*/_jsx(\"aside\",{children:files}),_this2.state.errorMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:_this2.state.errorMessage}),_this2.state.files.length>0&&/*#__PURE__*/_jsx(Button,{variant:\"info\",className:\"mt-4\",size:\"lg\",onClick:_this2.sendImage,children:\"Yubormoq\"}),_this2.state.isLoading&&/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\"})}),_this2.state.resentImage&&/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Alert,{variant:\"primary\",children:[\"Javob:  \",_this2.state.resentImage.data.classified]}),/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://www.google.com/search?q=\".concat(_this2.state.resentImage.data.classified),children:[_this2.state.resentImage.data.classified,\" nima ?\"]})}),/*#__PURE__*/_jsx(Image,{className:\"justify-content-center\",src:_this2.state.resentImage.data.picture,height:\"200\",rounded:true})]})]});}})});}}]);return Classifier;}(Component);export{Classifier as default};","map":{"version":3,"sources":["/Users/abdulazizashurov/Desktop/whatimage/src/whatimage-frontend/src/components/Classifier/Classifier.js"],"names":["React","Component","Dropzone","Spinner","Button","Alert","Image","axios","Classifier","state","files","isLoading","errorMessage","resentImage","onDrop","setState","loadImage","setTimeout","console","log","formData","FormData","append","name","post","headers","catch","err","message","activateSpinner","deactivateSpinner","sendImage","then","resp","getImageClass","obj","get","data","id","map","file","size","isDragActive","getRootProps","getInputProps","className","fontSize","length","classified","picture"],"mappings":"k4BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAO,kBAAP,CACA,OAAQC,OAAR,CAAiBC,MAAjB,CAAwBC,KAAxB,CAA8BC,KAA9B,KAA0C,iBAA1C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2FAGqBC,CAAAA,U,2UACjBC,K,CAAM,CACFC,KAAK,CAAE,EADL,CAEFC,SAAS,CAAE,KAFT,CAGFC,YAAY,CAAC,EAHX,CAIFC,WAAW,CAAC,IAJV,C,OAQNC,M,CAAS,SAACJ,KAAD,CAAU,CACf,MAAKK,QAAL,CAAc,CAACL,KAAK,CAAC,EAAP,CAAUC,SAAS,CAAC,IAApB,CAAyBE,WAAW,CAAC,IAArC,CAAd,EACA,MAAKG,SAAL,CAAeN,KAAf,EACH,C,OACDM,S,CAAY,SAACN,KAAD,CAAS,CACjBO,UAAU,CAAC,UAAI,CACX,MAAKF,QAAL,CAAc,CACVL,KAAK,CAALA,KADU,CAEVC,SAAS,CAAC,KAFA,CAAd,CAGE,UAAI,CACFO,OAAO,CAACC,GAAR,CAAY,MAAKV,KAAL,CAAWC,KAAvB,EACA,GAAIU,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2B,MAAKb,KAAL,CAAWC,KAAX,CAAiB,CAAjB,CAA3B,CAA+C,MAAKD,KAAL,CAAWC,KAAX,CAAiB,CAAjB,EAAoBa,IAAnE,EACAhB,KAAK,CAACiB,IAAN,CAAW,mCAAX,CAA+CJ,QAA/C,CAAwD,CACpDK,OAAO,CAAC,CACJ,SAAS,kBADL,CAEJ,eAAe,qBAFX,CAD4C,CAAxD,EAMPC,KANO,CAMD,SAAAC,GAAG,CAAE,CACR,MAAKZ,QAAL,CAAc,CAACH,YAAY,CAACe,GAAG,CAACC,OAAlB,CAAd,EACH,CARO,EAUH,CAjBD,EAmBH,CApBS,CAoBR,IApBQ,CAAV,CAqBH,C,OACDC,e,CAAkB,UAAI,CAClB,MAAKd,QAAL,CAAc,CAACL,KAAK,CAAC,EAAP,CAAUC,SAAS,CAAC,IAApB,CAAd,EACH,C,OACDmB,iB,CAAoB,UAAI,CACpB,MAAKf,QAAL,CAAc,CAACJ,SAAS,CAAC,KAAX,CAAd,EACH,C,OAEDoB,S,CAAY,UAAI,CACZ,MAAKF,eAAL,GACA,GAAIT,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2B,MAAKb,KAAL,CAAWC,KAAX,CAAiB,CAAjB,CAA3B,CAA+C,MAAKD,KAAL,CAAWC,KAAX,CAAiB,CAAjB,EAAoBa,IAAnE,EACAhB,KAAK,CAACiB,IAAN,CAAW,mCAAX,CAA+CJ,QAA/C,CAAwD,CACpDK,OAAO,CAAC,CACJ,SAAS,kBADL,CAEJ,eAAe,qBAFX,CAD4C,CAAxD,EAKGO,IALH,CAKQ,SAAAC,IAAI,CAAE,CACV,MAAKC,aAAL,CAAmBD,IAAnB,EACH,CAPD,EAOGP,KAPH,CAOS,SAAAC,GAAG,CAAE,CACV,MAAKZ,QAAL,CAAc,CAACH,YAAY,CAACe,GAAG,CAACC,OAAlB,CAAd,EACH,CATD,EAYH,C,OAEDM,a,CAAgB,SAACC,GAAD,CAAO,CACnB5B,KAAK,CAAC6B,GAAN,4CAA8CD,GAAG,CAACE,IAAJ,CAASC,EAAvD,MAA6D,CACzDb,OAAO,CAAC,CACJ,SAAS,kBADL,CADiD,CAA7D,EAKCO,IALD,CAKM,SAAAC,IAAI,CAAE,CACR,MAAKlB,QAAL,CAAc,CAACF,WAAW,CAACoB,IAAb,CAAd,EACH,CAPD,EAQCP,KARD,CAQO,SAAAC,GAAG,CAAE,CACR,MAAKZ,QAAL,CAAc,CAACH,YAAY,CAACe,GAAG,CAACC,OAAlB,CAAd,EACH,CAVD,EAWA,MAAKE,iBAAL,GACH,C,4DAGD,iBAAS,iBACL,GAAMpB,CAAAA,KAAK,CAAG,KAAKD,KAAL,CAAWC,KAAX,CAAiB6B,GAAjB,CAAqB,SAAAC,IAAI,qBACnC,sBACGA,IAAI,CAACjB,IADR,OACiBiB,IAAI,CAACC,IADtB,YAASD,IAAI,CAACjB,IAAd,CADmC,EAAzB,CAAd,CAKA,mBACI,kCACI,KAAC,QAAD,EAAU,MAAM,CAAE,KAAKT,MAAvB,CAAgC,MAAM,CAAC,uBAAvC,UACK,2BAAE4B,CAAAA,YAAF,MAAEA,YAAF,CAAgBC,YAAhB,MAAgBA,YAAhB,CAA8BC,aAA9B,MAA8BA,aAA9B,oBACD,iBAAS,SAAS,CAAC,WAAnB,wBACI,2CAASD,YAAY,CAAC,CAACE,SAAS,CAAE,eAAZ,CAAD,CAArB,6BACA,8BAAWD,aAAa,EAAxB,EADA,cAEA,UAAG,SAAS,CAAC,8BAAb,CAA4C,KAAK,CAAE,CAACE,QAAQ,CAAC,GAAV,CAAnD,EAFA,cAGA,UAAG,SAAS,CAAC,YAAb,UAA2BJ,YAAY,CAAG,mBAAH,CAAwB,uBAA/D,EAHA,IADJ,cAMI,uBACChC,KADD,EANJ,CASK,MAAI,CAACD,KAAL,CAAWG,YAAX,eACG,KAAC,KAAD,EAAO,OAAO,CAAC,QAAf,UACK,MAAI,CAACH,KAAL,CAAWG,YADhB,EAVR,CAgBK,MAAI,CAACH,KAAL,CAAWC,KAAX,CAAiBqC,MAAjB,CAA0B,CAA1B,eACG,KAAC,MAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,SAAS,CAAC,MAAjC,CAAwC,IAAI,CAAC,IAA7C,CAAkD,OAAO,CAAE,MAAI,CAAChB,SAAhE,sBAjBR,CAmBK,MAAI,CAACtB,KAAL,CAAWE,SAAX,eACG,KAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,IAAI,CAAC,QAAjC,uBACI,aAAM,SAAS,CAAC,iBAAhB,EADJ,EApBR,CAwBK,MAAI,CAACF,KAAL,CAAWI,WAAX,eACG,MAAC,KAAD,CAAO,QAAP,yBACI,MAAC,KAAD,EAAO,OAAO,CAAC,SAAf,sBACS,MAAI,CAACJ,KAAL,CAAWI,WAAX,CAAuBwB,IAAvB,CAA4BW,UADrC,GADJ,cAKI,KAAC,KAAD,EAAO,OAAO,CAAC,MAAf,uBACI,WAAI,IAAI,2CAAqC,MAAI,CAACvC,KAAL,CAAWI,WAAX,CAAuBwB,IAAvB,CAA4BW,UAAjE,CAAR,WAAwF,MAAI,CAACvC,KAAL,CAAWI,WAAX,CAAuBwB,IAAvB,CAA4BW,UAApH,aADJ,EALJ,cASI,KAAC,KAAD,EAAO,SAAS,CAAC,wBAAjB,CAA0C,GAAG,CAAE,MAAI,CAACvC,KAAL,CAAWI,WAAX,CAAuBwB,IAAvB,CAA4BY,OAA3E,CAAoF,MAAM,CAAC,KAA3F,CAAiG,OAAO,KAAxG,EATJ,GAzBR,GADC,EADL,EADJ,EADJ,CA+CH,C,wBAlImChD,S,SAAnBO,U","sourcesContent":["import React, { Component } from 'react'\nimport Dropzone from 'react-dropzone';\nimport './Classifier.css'\nimport {Spinner, Button,Alert,Image} from 'react-bootstrap'\nimport axios from 'axios'\n\n\nexport default class Classifier extends Component {\n    state={\n        files: [],\n        isLoading: false,\n        errorMessage:'',\n        resentImage:null\n    }\n\n\n    onDrop = (files) =>{\n        this.setState({files:[],isLoading:true,resentImage:null})\n        this.loadImage(files)\n    }\n    loadImage = (files)=>{\n        setTimeout(()=>{\n            this.setState({\n                files,\n                isLoading:false\n            },()=>{\n                console.log(this.state.files)\n                let formData = new FormData()\n                formData.append('picture', this.state.files[0],this.state.files[0].name)\n                axios.post('http://localhost:8000/api/images/',formData,{\n                    headers:{\n                        'accept':'application/json',\n                        'content-type':'multipart/form-data'\n                }\n        })\n        .catch(err=>{\n            this.setState({errorMessage:err.message})\n        })\n\n            }\n            )  \n        },1000);\n    }\n    activateSpinner = ()=>{\n        this.setState({files:[],isLoading:true})\n    }\n    deactivateSpinner = ()=>{\n        this.setState({isLoading:false})\n    }\n\n    sendImage = ()=>{\n        this.activateSpinner()\n        let formData = new FormData()\n        formData.append('picture', this.state.files[0],this.state.files[0].name)\n        axios.post('http://localhost:8000/api/images/',formData,{\n            headers:{\n                'accept':'application/json',\n                'content-type':'multipart/form-data'\n            }\n        }).then(resp=>{\n            this.getImageClass(resp)\n        }).catch(err=>{\n            this.setState({errorMessage:err.message})\n        })\n\n        \n    }\n\n    getImageClass = (obj)=>{\n        axios.get(`http://localhost:8000/api/images/${obj.data.id}/`,{\n            headers:{\n                'accept':'application/json',\n            }\n        })\n        .then(resp=>{\n            this.setState({resentImage:resp})\n        })\n        .catch(err=>{\n            this.setState({errorMessage:err.message})\n        })\n        this.deactivateSpinner()\n    }\n\n\n    render() {\n        const files = this.state.files.map(file => (\n            <li key={file.name}>\n              {file.name} - {file.size} bytes\n            </li>\n          ));\n        return (\n            <div>\n                <Dropzone onDrop={this.onDrop}  accept='image/png, image/jpeg'>\n                    {({isDragActive, getRootProps, getInputProps}) => (\n                    <section className=\"container\">\n                        <div {...getRootProps({className: 'dropzone back'})}>\n                        <input {...getInputProps()} />\n                        <i className='far fa-image mb-2 text-muted' style={{fontSize:100}}></i>\n                        <p className='text-muted'>{isDragActive ? \"Rasim yuklanmoqda\" :\"Bironta rasim yuklang\"}</p>\n                        </div>\n                        <aside>\n                        {files}\n                        </aside>\n                        {this.state.errorMessage && (\n                            <Alert variant='danger'>\n                                {this.state.errorMessage}\n                            </Alert>\n                        )}\n                       \n\n                        {this.state.files.length > 0 && (\n                            <Button variant='info' className='mt-4' size='lg' onClick={this.sendImage}>Yubormoq</Button>\n                        )}\n                        {this.state.isLoading && (\n                            <Spinner animation=\"border\" role=\"status\">\n                                <span className=\"visually-hidden\"></span>\n                            </Spinner>\n                        )}\n                        {this.state.resentImage &&(\n                            <React.Fragment>\n                                <Alert variant='primary'>\n                                Javob:  {this.state.resentImage.data.classified}\n                                </Alert>\n                                {\n                                <Alert variant='info'>\n                                    <a  href={`https://www.google.com/search?q=${this.state.resentImage.data.classified}`}>{this.state.resentImage.data.classified} nima ?</a>\n                                </Alert> }\n\n                                <Image className='justify-content-center' src={this.state.resentImage.data.picture} height='200' rounded />\n                            </React.Fragment>\n                        )}\n                        \n                    </section>\n                    )}\n                </Dropzone>\n            </div>\n        )\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}